<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='imagens/astronauta.png') }}">
    <title>Carrinho -  O Astronauta Bordados</title>
    <link href="https://fonts.googleapis.com/css2?family=Bree+Serif&family=Montserrat:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='estilo.css') }}">
</head>
<body>
    <nav>
        {%if tipo == 'cliente' or tipo == 'administrador'%}
        <div class="botao-perfil">
            <div class="foto-perfil">
                {% if usuario %}
                    <a href="{{ url_for('perfil') }}">
                        <img src="{{ url_for('static', filename='imagens/' ~ (foto or 'user.png')) }}">
                    </a>
                {% else %}
                    <img src="{{ url_for('static', filename='imagens/user.png') }}">
                {% endif %}
            </div>
        
            {%if nome and sobrenome %}
                <a href="{{url_for('perfil')}}"> {{nome}} {{sobrenome}}</a>
            {% else %}
                <a href="{{url_for('perfil')}}">Usuário</a>
            {% endif %}
        </div>
        {%endif%}
        <div class="menu">
            <a href="/">Início</a>
            <a href="/catalogo">Catálogo</a>
            <a href="/mural">Mural</a>
            {%if tipo =='administrador'%}
                <a href="/configuracoes">Configurações</a>
            {%else%}
                <a class="menu-select" href="/carrinho">Carrinho</a>
            {%endif%}
            <a href="/pedidos"> Pedidos </a>
            {%if tipo =='usuario'%}
                <a href="/login">Login</a>
            {%else%}
                <a href="/logout">Logout</a>
            {%endif%}
        </div>

    </nav>

        <header class="logo-header">
            <a href="/">
                <img src="{{ url_for('static', filename='imagens/astronauta.png') }}" alt="Astronauta bordando">   
                <div class="texto-logo">
                    <h1>O Astronauta</h1>
                    {%if tipo =='usuario'%}
                        <h2>BORDADOS</h2>
                    {%elif tipo =='administrador'%}
                        <h2>BORDADOS | ADMINISTRADOR</h2>
                    {%else%}
                        <h2>BORDADOS | CLIENTE</h2>
                    {%endif%}
                </div>
            </a>
        </header>
        <div class="botao-centro">
            <a href="{{ url_for('catalogo', tema=tema if tema and tema|lower != 'todos' else None) }}" class="botao" >Catálogo</a>
        </div>
        <form action="/realizar_pedido" method="post">    
            <div class="catalogo-container">

                {% if bordados %}
                    {% for item in bordados %}
                        <div class="bordado-carrinho">
                            <img src="{{ url_for('static', filename='imagens/' ~ item.imagem) }}" width="150">
                            <p>Preço: R$ {{ item.preco }}</p>
                            <div class="quantidade">
                                <label for="quantidade_{{ item.id }}">Quantidade:</label>
                                <input type="number" name="quantidade_{{ item.id }}" value="{{ item.quantidade or 1 }}" min="1">
                                <button class="botao-carrinho" formaction="/quantidade" formmethod="post" type="submit">&#10003;</button>
                            </div>
                            <input type="hidden" name="id" value="{{ item.id }}">
                            <button class="botao-carrinho" formaction="/remover_item" formmethod="post" type="submit">Remover</button>
                            
                            
                        </div>
                    {% endfor %}
                </div>
        
                <div class="botoes-carrinho" style="display: flex; gap: 10px; margin-top: 15px;">
                    <button class="botao" formaction="/esvaziar_carrinho" formmethod="post" type="submit">Esvaziar Carrinho</button>
                    <button class="botao" type="submit">Realizar Pedido</button>
                </div>
            </form>
            {% if bordados %}
            <div class="total-carrinho">
                <p>Total: R$ {{ '%.2f' | format(valor_total) }}</p>

            </div>
            {% endif %}

        {% else %}
            <div class="carrinho-vazio">
                <p>O carrinho está vazio.</p>
            </div>
        {% endif %}
        
        <div class="instagram-fixo">
            <a href="https://www.instagram.com/oastronauta.bordados/">
                <img src="{{ url_for('static', filename='imagens/instagram.png') }}" alt="Instagram">
            </a>
        </div>
        
        <div class="whatsapp-fixo">
            <a href="https://wa.me/5527997402134" target="_blank">
                <img src="{{ url_for('static', filename='imagens/whatsapp.png') }}" alt="Whatsapp">
            </a>
        </div>

        <div class="carrinho-fixo">
            <a href="/carrinho">
                <img src="{{ url_for('static', filename='imagens/carrinho.png') }}" alt="Carrinho">
            </a>
        </div>

        <div class="carrinho-container">
            {% if item_carrinho %}
            <span class="bolinha-notificacao"></span>
            {% endif %}
        </div>

    </div>
    <footer class ="rodape">
        <p>&copy; 2025 O Astronauta Bordados.</p>
        {%for contato in contatos %}
        <p>{{ contato['numero'] }} | {{ contato['email'] }} | {{ contato['insta'] }}</p>
        {% endfor %}
    </footer>
</body>
</html>
