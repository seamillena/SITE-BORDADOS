<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='imagens/astronauta.png') }}">
    <title>Catálogo - O Astronauta Bordados</title>
    <link href="https://fonts.googleapis.com/css2?family=Bree+Serif&family=Montserrat:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='estilo.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
    <nav>
        {%if tipo == 'cliente' or tipo == 'administrador'%}
        <div class="botao-perfil">
            <div class="foto-perfil">
                {% if usuario %}
                    <a href="{{ url_for('perfil') }}">
                        <img src="{{ url_for('static', filename='imagens/' ~ (foto or 'user.png')) }}">
                    </a>
                {% else %}
                    <img src="{{ url_for('static', filename='imagens/user.png') }}">
                {% endif %}
            </div>
        
            {%if nome and sobrenome %}
                <a href="{{url_for('perfil')}}"> {{nome}} {{sobrenome}}</a>
            {% else %}
                <a href="{{url_for('perfil')}}">Usuário</a>
            {% endif %}
        </div>
        {%endif%}

        <div class="menu">
            <a href="/">Início</a>
            <a class="menu-select" href="/catalogo">Catálogo</a>
            <a href="/mural">Mural</a>
            {%if tipo =='administrador'%}
                <a href="/configuracoes">Configurações</a>
            {%else%}
                <a href="/carrinho">Carrinho</a>
            {%endif%}
            <a href="/pedidos"> Pedidos </a>
            {%if tipo =='usuario'%}
                <a href="/login">Login</a>
            {%else%}
                <a href="/logout">Logout</a>
            {%endif%}
        </div>
    </nav>
        
    <header class="logo-header">
        <a href="/">
            <img src="{{ url_for('static', filename='imagens/astronauta.png') }}" alt="Astronauta bordando">   
            <div class="texto-logo">
                <h1>O Astronauta</h1>
                {%if tipo =='usuario'%}
                    <h2>BORDADOS</h2>
                {%elif tipo =='administrador'%}
                    <h2>BORDADOS | ADMINISTRADOR</h2>
                {%else%}
                    <h2>BORDADOS | CLIENTE</h2>
                {%endif%}
            </div>
        </a>
    </header>

    <div class="pesquisa-container">
        <div class="pesquisa-catalogo">
            <form method="get" action="/catalogo">
                <input type="text" name="pesquisa" id="pesquisa" placeholder="Pesquisar" value="{{ pesquisa }}">
                <button type="submit"><i class="fas fa-search"></i></button>
            </form>
        </div>

        <div class="filtro-catalogo">
            <form method="get" action="/catalogo">
                <i class="fas fa-filter"></i>
                <select name="tema" id="tema" onchange="this.form.submit()">
                    <option value="">Todos</option>
                    {% for t in temas_ordenados %}
                        <option value="{{ t }}" {% if t == tema_atual %}selected{% endif %}>{{ t }}</option>
                    {% endfor %}
                </select>
            </form>
        </div>    
    </div>    

    <div class="catalogo-container">
        {%if tipo == 'administrador'%}
        <a href="/adicionar-bordado" class="botao-catalogo">ADICIONAR
            <label>BORDADO</label>
            <img src="{{ url_for('static', filename='imagens/plus.png') }}" alt="Adicionar bordado" width="30">
        </a>
        {%endif%}

        {% for bordado in bordados %}
        <a href="{{ url_for('detalhes', id=bordado.id, tema=tema_atual) }}" class="bordado-link">
            <div class="bordado">
                <img src="{{ url_for('static', filename='imagens/' + bordado.imagem) }}" alt="Imagem do bordado" width="150">
            </div>
        </a>
        {% endfor %}
    </div>

    {%if tipo != 'administrador'%}
    <div class="mensagem-fixo">
        <a href="mailto:oastronauta.bordados@gmail.com" target="_blank">
            <img src="{{ url_for('static', filename='imagens/email.png') }}" alt="gmail">
        </a>
    </div>
    
    <div class="instagram-fixo">
        <a href="https://www.instagram.com/oastronauta.bordados/">
            <img src="{{ url_for('static', filename='imagens/instagram.png') }}" alt="Instagram">
        </a>
    </div>
    
    <div class="whatsapp-fixo">
        <a href="https://wa.me/5527997402134" target="_blank">
            <img src="{{ url_for('static', filename='imagens/whatsapp.png') }}" alt="Whatsapp">
        </a>
    </div>

    <div class="carrinho-fixo">
        <a href="/carrinho">
            <img src="{{ url_for('static', filename='imagens/carrinho.png') }}" alt="Carrinho">
        </a>
    </div>

    <div class="carrinho-container">
        {% if item_carrinho %}
        <span class="bolinha-notificacao"></span>
        {% endif %}
    </div>
    {%endif%}
        
    <footer class ="rodape">
        <p>&copy; 2025 O Astronauta Bordados.</p>
        {%for contato in contatos %}
        <p>{{ contato['numero'] }} | {{ contato['email'] }} | {{ contato['insta'] }}</p>
        {% endfor %}
    </footer>
</body>
</html>
